<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rust Code Highlighter With Color Picker</title>

<style>
  pre { background: var(--BG1); color:#eee; padding:20px; overflow:auto; }

  :root {
    --Highlights: #ffffff;
    --Underlines: #ffffff;
    --Unique: #ffffff;
    --Operator: #ffffff;
    --Delimiter: #ffffff;
    --Bracket: #ffffff;
    --Character: #ffffff;
    --Escapes: #ffffff;
    --Url: #ffffff;
    --Path: #ffffff;
    --Special: #ffffff;
    --Debug: #ffffff;
    --DocString: #ffffff;
    --RegEx: #ffffff;
    --Strings: #ffffff;
    --Comments: #ffffff;
    --Floats: #ffffff;
    --Integers: #ffffff;
    --Decorator: #ffffff;
    --Type: #ffffff;
    --Exception: #ffffff;
    --Return: #ffffff;
    --Conditional: #ffffff;
    --Repeat: #ffffff;
    --Macro: #ffffff;
    --Function: #ffffff;
    --Type: #ffffff;
    --Namespace: #ffffff;
    --Import: #ffffff;
    --Constant: #ffffff;
    --Member: #ffffff;
    --Parameter: #ffffff;
    --Builtin: #ffffff;
    --BG1: #ffffff;
    --BG2: #ffffff;
    --Border: #ffffff;
    --Header: #ffffff;
    --DiffAdd: #ffffff;
    --DiffMod: #ffffff;
    --DiffRem: #ffffff;
  }

  .BackGround = { color: var(--Background-color)}

  .Variables {
      .Builtin { color: var(--Builtin); }
      .Parameter { color: var(--Parameter); }
      .Member { color: var(--Member); }
      .Constant { color: var(--Constant); }
  }
  .Declarations {
      .Import { color: var(--Import); }
      .Namespace { color: var(--Namespace); }
      .Type { color: var(--Type); }
      .Function { color: var(--Function); }
      .Macro { color: var(--Macro); }
      .Repeat { color: var(--Repeat); }
      .Conditional { color: var(--Conditional); }
  }
  .Formalities {
      .Return { color: var(--Return); }
      .Exception { color: var(--Exception); }
      .Type { color: var(--Type); }
      .Decorator { color: var(--Decorator); }
  }
  .Literals {
      .Integers { color: var(--Integers); }
      .Floats { color: var(--Floats); }
      .Strings { color: var(--Strings); }
  }
  .RawText {
      .Comments { color: var(--Comments); }
      .RegEx { color: var(--RegEx); }
      .DocString { color: var(--DocString); }
      .Debug { color: var(--Debug); }
      .Unique { color: var(--Unique); }
      .Path { color: var(--Path); }
      .Url { color: var(--Url); }
      .Escapes { color: var(--Escapes); }
      .Character { color: var(--Character); }
  }
  .Punctuation {
      .Bracket { color: var(--Bracket); }
      .Delimiter { color: var(--Delimiter); }
      .Operator { color: var(--Operator); }
      .Special { color: var(--Special); }
  }
  .General {
      .Underlines { color: var(--Underlines); }
      .Highlights { color: var(--Highlights); }
      .BG1 { color: var(--BG1) }
      .BG2 { color: var(--BG2) }
      .Border { color: var(--Border) }
      .Header { color: var(--Header) }
      .DiffAdd { color: var(--DiffAdd) }
      .DiffRem { color: var(--DiffRem) }
      .DiffMod { color: var(--DiffMod) }
  }

  #backToTop {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: var(--BG2);
    color: var(--ConsoleText);
    border: none;
    cursor: pointer;
    font-size: 22px;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }
</style>
</head>

<body>

<div id="navbar" style="display:flex; gap:10px;">
</div>

<script>
  const data = {
    "Variables": ["Builtin", "Parameter", "Member", "Constant"],
    "Declarations": ["Import", "Namespace", "Type", "Function", "Macro", "Repeat", "Conditional"],
    "Formalities": ["Return", "Exception", "Type", "Decorator"],
    "Literals": ["Integers", "Floats"],
    "RawText": ["Comments","Strings","RegEx","DocString","Debug","Unique","Path","Url","Escapes","Character"],
    "Punctuation": ["Bracket","Delimiter","Operator","Special"],
    "General": ["Underlines","Highlights","BG1","BG2","Border","Header","DiffAdd","DiffRem", "DiffMod"]
  };

  const container = document.getElementById("navbar")

  for (const [title,subitems] of Object.entries(data)) {
    const section = document.createElement("div")
    const sectionTitle = document.createElement("h2")
      sectionTitle.innerText = title
      section.appendChild(sectionTitle)
    for (const subitem of subitems) {
      const label = document.createElement("label")
        label.style.cursor = "pointer"
        label.style.borderWidth = "0.5px"
        label.style.border = "solid"
        label.style.borderColor = "var(--Border)"
        label.style.backgroundColor = "var(--BG2)"
        label.innerText = subitem
      const colorPicker = document.createElement("input")
        colorPicker.type = "color"
        colorPicker.style.display = "none"

      colorPicker.addEventListener("input", () => {
        document.documentElement.style.setProperty(
          "--" + label.innerText.trim(),
          colorPicker.value
        )
        if (!label.innerText.trim() == "BG") {
          label.style.color = colorPicker.value
        }
      })

      
      label.appendChild(colorPicker)
      label.appendChild(document.createElement("br"))
      section.appendChild(label)
    }
    container.appendChild(section)
  }
  document.getElementById("navbar").childNodes[7].childNodes[4].style.color = "var(--BG1)"
</script>

<button id="backToTop" aria-label="Back to top">↑↓</button>

<script>
  const button = document.getElementById("backToTop");
  let lastpos = 300
  button.addEventListener("click", () => {
    let scrollto = -1
    if (window.scrollY > 50) {
      lastpos = window.scrollY
      scrollto = 0
    } else {
      scrollto = lastpos
    }
    window.scrollTo({
      top: scrollto,
      behavior: "smooth"
    });
  });
</script>

<h3 style="position: sticky; top: 0; background: var(--Header);">header</h3>

<pre>
<span class="doc">
//! This module demonstrates many Rust concepts in one snippet!
// This header can be considered a docstring.
// For the record.
</span>

<span class="comment">// Import / Namespace</span>
<span class="keyword">use</span> <span class="namespace">std::collections::HashMap</span>;
<span class="keyword">use</span> <span class="namespace">regex::Regex</span>;

<span class="comment">// Constant</span>
<span class="keyword">const</span> <span class="member">PI</span>: <span class="type">f64</span> = <span class="number">3.1415926535</span>;

<span class="comment">// Type / Modifier</span>
<span class="keyword">pub struct</span> <span class="type">Circle</span> {
    <span class="comment">// Member Variable / Property</span>
    <span class="member">radius</span>: <span class="type">f64</span>,
}

<span class="keyword">impl</span> <span class="type">Circle</span> {
    <span class="comment">// Function with Parameter Variable</span>
    <span class="keyword">pub fn</span> <span class="function">new</span>(<span class="variable">radius</span>: <span class="type">f64</span>) -> <span class="type">Circle</span> {
        <span class="keyword">return</span> <span class="type">Circle</span> { <span class="member">radius</span> };
    }

    <span class="keyword">pub fn</span> <span class="function">area</span>(&self) -> <span class="type">f64</span> {
        <span class="member">PI</span> <span class="operator">*</span> self.<span class="member">radius</span> <span class="operator">*</span> self.<span class="member">radius</span>
    }
}

<span class="comment">// Macro</span>
<span class="keyword">macro_rules!</span> <span class="macro">greet</span> {
    ($name:expr) => {
        println!(<span class="string">"Hello, {}!"</span>, $name);
    };
}

<span class="keyword">fn</span> <span class="function">main</span>() -> <span class="type">Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt;</span> {
    <span class="comment">// Variable</span>
    <span class="keyword">let</span> <span class="variable">name</span> = <span class="string">"Rustacean"</span>;
    <span class="keyword">let</span> <span class="variable">int_val</span>: <span class="type">i32</span> = <span class="number">42</span>;
    <span class="keyword">let</span> <span class="variable">float_val</span>: <span class="type">f64</span> = <span class="number">3.14</span>;
    <span class="keyword">let</span> <span class="variable">escaped_str</span> = <span class="string">"Hello\nWorld\t!"</span>;
    <span class="keyword">let</span> <span class="variable">ch</span>: <span class="type">char</span> = <span class="string">'R'</span>;
    <span class="keyword">let</span> <span class="special">special</span> = <span class="string">"@#$%^&*"</span>;
    <span class="keyword">let</span> <span class="variable">url</span> = <span class="string">"https://www.rust-lang.org"</span>;
    <span class="keyword">let</span> <span class="variable">path</span> = <span class="string">"/usr/local/bin"</span>;

    println!(<span class="string">"Debug info: {:?}"</span>, (<span class="variable">name</span>, <span class="variable">int_val</span>, <span class="variable">float_val</span>, <span class="variable">escaped_str</span>, <span class="variable">ch</span>));

    greet!(<span class="variable">name</span>);

    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">0</span>.. <span class="number">3</span> {
        println!(<span class="string">"Repeat count: {}"</span>, <span class="variable">i</span>);
    }

    <span class="keyword">if</span> <span class="variable">int_val</span> <span class="operator">&gt;</span> <span class="number">40</span> {
        println!(<span class="string">"int_val is greater than 40"</span>);
    } <span class="keyword">else</span> {
        println!(<span class="string">"int_val is 40 or less"</span>);
    }

    <span class="keyword">let</span> <span class="variable">re</span> = Regex::new(<span class="regex">r"^\w+://[\w.-]+$"</span>)?;
    <span class="keyword">if</span> <span class="variable">re</span>.is_match(<span class="variable">url</span>) {
        println!(<span class="string">"Valid URL detected!"</span>);
    }

    <span class="keyword">let mut</span> <span class="variable">map</span>: HashMap&lt;<span class="type">String</span>, <span class="type">i32</span>&gt; = HashMap::new();
    <span class="variable">map</span>.insert(<span class="string">"one"</span>.to_string(), <span class="number">1</span>);

    println!(<span class="string">"*** Highlighted: {} ***"</span>, <span class="variable">name</span>);
    println!(<span class="string">"--- Underlined: {} ---"</span>, <span class="variable">name</span>);

    <span class="keyword">let</span> <span class="variable">array</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];
    <span class="keyword">let</span> <span class="variable">tuple</span> = (<span class="number">1</span>, <span class="string">"two"</span>);
    <span class="keyword">let</span> <span class="variable">sum</span> = <span class="variable">array</span>[<span class="number">0</span>] <span class="operator">+</span> <span class="variable">int_val</span>;

    println!(<span class="string">"Diff:\n- old value: {}\n+ new value: {}"</span>, <span class="number">40</span>, <span class="variable">int_val</span>);

    <span class="keyword">return</span> Ok(());
}
</pre>

</body>
</html>
