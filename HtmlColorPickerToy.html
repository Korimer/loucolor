<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rust Code Highlighter With Color Picker</title>

<style>
  pre { background: var(--BG1); color:#eee; padding:20px; overflow:auto; }

  :root {
    --Highlights: #ffffff;
    --Underlines: #ffffff;
    --Unique: #ffffff;
    --Operator: #ffffff;
    --Delimiter: #ffffff;
    --Bracket: #ffffff;
    --Character: #ffffff;
    --Escapes: #ffffff;
    --Url: #ffffff;
    --Path: #ffffff;
    --Special: #ffffff;
    --Debug: #ffffff;
    --DocString: #ffffff;
    --RegEx: #ffffff;
    --Strings: #ffffff;
    --Comments: #ffffff;
    --Floats: #ffffff;
    --Integers: #ffffff;
    --Decorator: #ffffff;
    --Type: #ffffff;
    --Exception: #ffffff;
    --Return: #ffffff;
    --Conditional: #ffffff;
    --Repeat: #ffffff;
    --Macro: #ffffff;
    --Function: #ffffff;
    --Type: #ffffff;
    --Namespace: #ffffff;
    --Import: #ffffff;
    --Constant: #ffffff;
    --Member: #ffffff;
    --Parameter: #ffffff;
    --Builtin: #ffffff;
    --BG1: #000000;
    --BG2: #ffffff;
    --Border: #ffffff;
    --Header: #ffffff;
    --DiffAdd: #ffffff;
    --DiffMod: #ffffff;
    --DiffRem: #ffffff;
  }

  .Builtin { color: var(--Builtin); }
  .Parameter { color: var(--Parameter); }
  .Member { color: var(--Member); }
  .Constant { color: var(--Constant); }
  
  .Import { color: var(--Import); }
  .Namespace { color: var(--Namespace); }
  .Type { color: var(--Type); }
  .Function { color: var(--Function); }
  .Macro { color: var(--Macro); }
  .Repeat { color: var(--Repeat); }
  .Conditional { color: var(--Conditional); }
  
  .Return { color: var(--Return); }
  .Exception { color: var(--Exception); }
  .Type { color: var(--Type); }
  .Decorator { color: var(--Decorator); }
  
  .Integers { color: var(--Integers); }
  .Floats { color: var(--Floats); }
  .Strings { color: var(--Strings); }
  
  .Comments { color: var(--Comments); }
  .RegEx { color: var(--RegEx); }
  .DocString { color: var(--DocString); }
  .Debug { color: var(--Debug); }
  .Unique { color: var(--Unique); }
  .Path { color: var(--Path); }
  .Url { color: var(--Url); }
  .Escapes { color: var(--Escapes); }
  .Character { color: var(--Character); }
  
  .Bracket { color: var(--Bracket); }
  .Delimiter { color: var(--Delimiter); }
  .Operator { color: var(--Operator); }
  .Special { color: var(--Special); }
  
  .Underlines { color: var(--Underlines); }
  .Highlights { color: var(--Highlights); }
  .BG1 { color: var(--BG1) }
  .BG2 { color: var(--BG2) }
  .Border { color: var(--Border) }
  .Header { color: var(--Header) }
  .DiffAdd { color: var(--DiffAdd) }
  .DiffRem { color: var(--DiffRem) }
  .DiffMod { color: var(--DiffMod) }

  #backToTop {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: var(--BG2);
    color: var(--ConsoleText);
    border: none;
    cursor: pointer;
    font-size: 22px;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }
</style>
</head>

<body>

<div id="navbar" style="display:flex; gap:10px;">
</div>

<script>
  const data = {
    "Variables": ["Builtin", "Parameter", "Member", "Constant"],
    "Declarations": ["Import", "Namespace", "Type", "Function", "Macro", "Repeat", "Conditional"],
    "Formalities": ["Return", "Exception", "Type", "Decorator"],
    "Literals": ["Integers", "Floats"],
    "RawText": ["Comments","Strings","RegEx","DocString","Debug","Unique","Path","Url","Escapes","Character"],
    "Punctuation": ["Bracket","Delimiter","Operator","Special"],
    "General": ["Underlines","Highlights","BG1","BG2","Border","Header","DiffAdd","DiffRem", "DiffMod"]
  };

  const container = document.getElementById("navbar")

  for (const [title,subitems] of Object.entries(data)) {
    const section = document.createElement("div")
    const sectionTitle = document.createElement("h2")
      sectionTitle.innerText = title
      section.appendChild(sectionTitle)
    for (const subitem of subitems) {
      const label = document.createElement("label")
        label.style.cursor = "pointer"
        label.style.borderWidth = "0.5px"
        label.style.border = "solid"
        label.style.borderColor = "var(--Border)"
        label.style.backgroundColor = "var(--BG2)"
        label.innerText = subitem
      const colorPicker = document.createElement("input")
        colorPicker.type = "color"
        colorPicker.style.display = "none"

      colorPicker.addEventListener("input", () => {
        document.documentElement.style.setProperty(
          "--" + label.innerText.trim(),
          colorPicker.value
        )
        if (label.innerText.trim() !== "BG2") {
          label.style.color = colorPicker.value
        }
      })

      
      label.appendChild(colorPicker)
      label.appendChild(document.createElement("br"))
      section.appendChild(label)
    }
    container.appendChild(section)
  }
  // in an effort to ensure BG2 is always readable
  document.getElementById("navbar").childNodes[7].childNodes[4].style.color = "var(--BG1)"
</script>

<button id="backToTop" aria-label="Back to top">↑↓</button>

<script>
  const button = document.getElementById("backToTop");
  let lastpos = 300
  button.addEventListener("click", () => {
    let scrollto = -1
    if (window.scrollY > 50) {
      lastpos = window.scrollY
      scrollto = 0
    } else {
      scrollto = lastpos
    }
    window.scrollTo({
      top: scrollto,
      behavior: "smooth"
    });
  });
</script>

<h3 style="position: sticky; top: 0; background: var(--Header);">header</h3>

<pre>
<span class="DocString">
//! This module demonstrates many Rust concepts in one snippet!
// This header can be considered a docstring.
// For the record.
</span>

<span class="Comments">// Import / Namespace</span>
<span class="Import">use</span> <span class="Namespace">std::collections::HashMap</span><span class="Delimiter">;</span>
<span class="Import">use</span> <span class="Namespace">regex::Regex</span><span class="Delimiter">;</span>

<span class="Comments">// Constant</span>
<span class="Decorator">const</span> <span class="Constant">PI</span><span class="Delimiter">:</span> <span class="Type">f64</span>
<span class="Operator">=</span> <span class="Floats">3.1415926535</span><span class="Delimiter">;</span>

<span class="Comments">// Type / Modifier</span>
<span class="Decorator">pub</span> <span class="Type">struct</span> <span class="Type">Circle</span> <span class="Bracket">{</span>
    <span class="Comments">// Member Variable / Property</span>
    <span class="Member">radius</span><span class="Delimiter">:</span> <span class="Type">f64</span><span class="Delimiter">,</span>
<span class="Bracket">}</span>

<span class="Decorator">impl</span> <span class="Type">Circle</span> <span class="Bracket">{</span>
    <span class="Comments">// Function with Parameter Variable</span>
    <span class="Decorator">pub</span> <span class="Function">fn</span> <span class="Function">new</span>
    <span class="Bracket">(</span><span class="Parameter">radius</span><span class="Delimiter">:</span> <span class="Type">f64</span><span class="Bracket">)</span>
    <span class="Operator">-&gt;</span> <span class="Type">Circle</span> <span class="Bracket">{</span>
        <span class="Return">return</span> <span class="Type">Circle</span>
        <span class="Bracket">{</span> <span class="Member">radius</span> <span class="Bracket">}</span><span class="Delimiter">;</span>
    <span class="Bracket">}</span>

    <span class="Decorator">pub</span> <span class="Function">fn</span> <span class="Function">area</span>
    <span class="Bracket">(</span><span class="Parameter">&self</span><span class="Bracket">)</span>
    <span class="Operator">-&gt;</span> <span class="Type">f64</span> <span class="Bracket">{</span>
        <span class="Constant">PI</span>
        <span class="Operator">*</span> self<span class="Delimiter">.</span><span class="Member">radius</span>
        <span class="Operator">*</span> self<span class="Delimiter">.</span><span class="Member">radius</span>
    <span class="Bracket">}</span>
<span class="Bracket">}</span>

<span class="Comments">// Macro</span>
<span class="Macro">macro_rules!</span> <span class="Macro">greet</span> <span class="Bracket">{</span>
    <span class="Bracket">(</span>$name<span class="Delimiter">:</span>expr<span class="Bracket">)</span>
    <span class="Operator">=&gt;</span> <span class="Bracket">{</span>
        println!<span class="Bracket">(</span><span class="Strings">"Hello, {}!"</span><span class="Delimiter">,</span> $name<span class="Bracket">)</span><span class="Delimiter">;</span>
    <span class="Bracket">}</span><span class="Delimiter">;</span>
<span class="Bracket">}</span>

<span class="Function">fn</span> <span class="Function">main</span><span class="Bracket">()</span>
<span class="Operator">-&gt;</span>
<span class="Type">Result</span>
<span class="Bracket">&lt;</span><span class="Bracket">()</span><span class="Delimiter">,</span> <span class="Type">Box</span>
<span class="Bracket">&lt;</span>dyn <span class="Namespace">std::error::Error</span><span class="Bracket">&gt;&gt;</span>
<span class="Bracket">{</span>

    <span class="Comments">// Variable</span>
    <span class="Decorator">let</span> <span class="Parameter">name</span>
    <span class="Operator">=</span> <span class="Strings">"Rustacean"</span><span class="Delimiter">;</span>

    <span class="Decorator">let</span> <span class="Parameter">int_val</span><span class="Delimiter">:</span>
    <span class="Type">i32</span> <span class="Operator">=</span> <span class="Integers">42</span><span class="Delimiter">;</span>

    <span class="Decorator">let</span> <span class="Parameter">float_val</span><span class="Delimiter">:</span>
    <span class="Type">f64</span> <span class="Operator">=</span> <span class="Floats">3.14</span><span class="Delimiter">;</span>

    <span class="Decorator">let</span> <span class="Parameter">escaped_str</span>
    <span class="Operator">=</span> <span class="Strings">"Hello\nWorld\t!"</span><span class="Delimiter">;</span>

    <span class="Decorator">let</span> <span class="Parameter">url</span>
    <span class="Operator">=</span> <span class="Strings">"https://www.rust-lang.org"</span><span class="Delimiter">;</span>

    <span class="Decorator">let</span> <span class="Parameter">re</span>
    <span class="Operator">=</span> <span class="Namespace">Regex</span><span class="Delimiter">.</span>new
    <span class="Bracket">(</span><span class="RegEx">r"^\w+://[\w.-]+$"</span><span class="Bracket">)</span><span class="Delimiter">;</span>

    <span class="Return">return</span> Ok<span class="Bracket">(</span><span class="Bracket">()</span><span class="Bracket">)</span><span class="Delimiter">;</span>
<span class="Bracket">}</span>
</pre>

</body>
</html>
