<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Rust Code Highlighter With Color Picker</title>

<style>
  pre { background: var(--BG1); color:#eee; padding:20px; overflow:auto; }

  :root {
    --BG1: #000000;
    --BG2: #aaaaaa;
    --Border: #ffffff;
    --Border2: #ffffff;
    --Header: #ffffff;
  }

  #backToTop {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    border: 3px solid var(--Border2);
    border-radius: 50%;
    background-color: var(--BG2);
    color: var(--ConsoleText);
    cursor: pointer;
    font-size: 22px;
    align-items: center;
    justify-content: center;
    z-index: 1000;
  }
</style>
</head>

<body style="background-color: var(--BG2)">

<div id="navbar" style="display:flex; gap:10px;">
</div>

<script>
  const data = {
    "Variables": ["Default","Builtin", "Parameter", "Member", "Constant"],
    "Declarations": ["Import", "Namespace", "DecType", "Function", "Macro", "Logical"],
    "Formalities": ["Return", "Exception", "FormType", "Decorator", "Modifier", "Keyword"],
    "Literals": ["Integers", "Floats"],
    "RawText": ["Comments","Strings","DocString","Special","Escapes","Character"],
    "Punctuation": ["Bracket","Delimiter","Operator"],
    "General": ["BG1","BG2","Border","Border2","Header","HeaderText"],
    "External": ["RedBg","YellowBg", "GreenBg", "HighlightedBg","DefaultRed","DefaultYellow"]
  };

  function changeColor(varToChange, color) {
    document.documentElement.style.setProperty(
      "--" + varToChange,
      color
    )
    let label = document.getElementById(varToChange)
    if (label.innerText.trim() !== "BG2") {
      label.style.color = color
    }
  }

  const container = document.getElementById("navbar")

  for (const [title,subitems] of Object.entries(data)) {
    const section = document.createElement("div")
      section.style.borderWidth = "1px"
      section.style.border = "solid"
      section.style.borderColor = "var(--Border2)"
    const sectionTitle = document.createElement("h2")
      sectionTitle.innerText = title
      sectionTitle.style.textAlign = "center"
      section.appendChild(sectionTitle)
    for (const subitem of subitems) {
      const container = document.createElement("div")
        container.style.borderWidth = "1px"
        container.style.border = "solid"
        container.style.borderColor = "var(--Border)"
        container.style.backgroundColor = "var(--BG2)"
      const label = document.createElement("label")
        label.id = subitem
        label.style.cursor = "pointer"
        label.style.display = "block"
        label.style.textAlign = "center"
        label.style.fontSize = "larger"
        label.innerText = subitem
      const colorPicker = document.createElement("input")
        colorPicker.type = "color"
        colorPicker.style.display = "none"
      const hexInput = document.createElement("input")
        hexInput.type = "text"

      colorPicker.addEventListener("input", () => {
        changeColor(label.innerText.trim(), colorPicker.value)
      })
      hexInput.addEventListener("keyup", function(event) {
        event.preventDefault()
        if (event.keyCode === 13) {
          let hexText = hexInput.value
          let hexcode = ""
          if (hexText.startsWith("#")) {hexcode = hexText}
          else {hexcode = "#" + hexText}
          changeColor(label.innerText.trim(),hexcode)
          hexInput.value = ""
        }
      })

      container.appendChild(label)
      label.appendChild(colorPicker)
      label.appendChild(document.createElement("br"))
      label.appendChild(hexInput)
      label.appendChild(document.createElement("br"))
      section.appendChild(container)
      //section.appendChild(document.createElement("br"))
    }
    container.appendChild(section)
  }
  // in an effort to ensure BG2 is always readable
  document.getElementById("navbar").childNodes[7].childNodes[4].style.color = "var(--BG1)"
</script>

<button id="backToTop" aria-label="Back to top">↑↓</button>

<script>
  const button = document.getElementById("backToTop");
  let lastpos = 300
  button.addEventListener("click", () => {
    let scrollto = -1
    if (window.scrollY > 50) {
      lastpos = window.scrollY
      scrollto = 0
    } else {
      scrollto = lastpos
    }
    window.scrollTo({
      top: scrollto,
      behavior: "smooth"
    });
  })
</script>

<br>
<div id="savestates">
  <button id="savebtn" style="font-size: 20px; background-color: var(--BG2); padding: 10px 70px; border: 2px solid var(--Border2)">save</button>
  <button id="loadbtn" style="font-size: 20px; background-color: var(--BG2); padding: 10px 70px; border: 2px solid var(--Border2)">load</button>
</div>

<script> 
  let save = document.getElementById("savebtn")
  save.addEventListener("click", () => {
    let savedvalues = ""
    for (const [title,subitems] of Object.entries(data)) {
      for (const subitem of subitems) {
        let color = document.documentElement.style.getPropertyValue("--" + subitem)
        if (color === "") continue
        savedvalues += subitem + ":" + color + "\n"
      }
    }
    const blob = new Blob([savedvalues])
    const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'AwesomeColorScheme.oacf';
      document.body.appendChild(link);
      link.click();
    console.log(savedvalues)
  })

  let load = document.getElementById("loadbtn")
  load.addEventListener("click", () => {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.oacf';
    input.onchange = e => {
      const file = e.target.files[0]
      if (!file) return

      const reader = new FileReader()
      
      reader.onload = event => {
            const content = event.target.result;
            const lines = content.split("\n");
            for (line of lines) {
              if (line === "") continue
              let [item, color] = line.split(":")
              changeColor(item,color)
            }
        };
      
      reader.readAsText(file)
    }
    input.click()
  })
</script>

<h3 style="position: sticky; top: 0; background: var(--Header); color: var(--HeaderText); border: 3px solid var(--Border2)">Example Rust Code.rs (since this is a header, there could be a lot more than just a filename here.)</h3>

<pre style="border: 3px solid var(--Border)"><code>
<span style="color: var(--DocString)">///Hello, This is my rust program!!! visit</span>
<span style="color: var(--DocString)">/// <span style="color: var(--Special)">https://www.rust-lang.org</span></span>
<span style="color: var(--DocString)">///for info on rust itself.</span>

<span style="color: var(--Comments)">// Import / Namespace</span>
<span style="color: var(--Import)">use</span> <span style="color: var(--Namespace)">std</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--Bracket)">{</span><span style="color: var(--Namespace)">collections</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--DecType)">HashMap</span><span style="color: var(--Delimiter)">,</span> <span style="color: var(--Namespace)">env</span><span style="color: var(--Delimiter)">,</span> <span style="color: var(--Namespace)">hash</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--DecType)">Hash</span><span style="color: var(--Bracket)">}</span><span style="color: var(--Delimiter)">;</span>
<span style="color: var(--Import)">use</span> <span style="color: var(--Namespace)">regex</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--DecType)">Regex</span><span style="color: var(--Delimiter)">;</span>

<span style="color: var(--Comments)">// Peproc</span>
<span style="color: var(--Decorator)">#</span><span style="color: var(--Bracket)">[</span><span style="color: var(--Attribute)">allow</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Namespace)">clippy</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--Member)">approx_constant</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Bracket)">]</span>

<span style="color: var(--Comments)">// Constant</span>
<span style="color: var(--Keyword)">const</span> <span style="color: var(--Constant)">PI</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">f64</span> <span style="color: var(--Operator)">=</span> <span style="color: var(--Floats)">3.1415926535</span><span style="color: var(--Delimiter)">;</span>

<span style="color: var(--Comments)">// Pub is a Modifier, struct is a Type</span>
<span style="color: var(--Modifier)">pub</span> <span style="color: var(--FormType)">struct</span> <span style="color: var(--DecType)">Circle</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Member)">radius</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">f64</span><span style="color: var(--Delimiter)">,</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Modifier)">pub</span> <span style="color: var(--FormType)">struct</span> <span style="color: var(--DecType)">Square</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Member)">side_length</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">f64</span><span style="color: var(--Delimiter)">,</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Modifier)">pub</span> <span style="color: var(--FormType)">struct</span> <span style="color: var(--DecType)">Triangle</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Member)">side1</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">f64</span><span style="color: var(--Delimiter)">,</span>
    <span style="color: var(--Member)">side2</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">f64</span><span style="color: var(--Delimiter)">,</span>
    <span style="color: var(--Member)">side3</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">f64</span><span style="color: var(--Delimiter)">,</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Modifier)">pub</span> <span style="color: var(--FormType)">enum</span> <span style="color: var(--DecType)">Shape</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--DecType)">Circle</span><span style="color: var(--Bracket)">(</span><span style="color: var(--DecType)">Circle</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">,</span>
    <span style="color: var(--DecType)">Square</span><span style="color: var(--Bracket)">(</span><span style="color: var(--DecType)">Square</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">,</span>
    <span style="color: var(--DecType)">Triangle</span><span style="color: var(--Bracket)">(</span><span style="color: var(--DecType)">Triangle</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">,</span>
<span style="color: var(--Bracket)">}</span>
<span style="color: var(--Keyword)">impl</span> <span style="color: var(--DecType)">SimpleShape</span> <span style="color: var(--Keyword)">for</span> <span style="color: var(--DecType)">Shape</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">area</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Operator)">&amp;</span><span style="color: var(--Builtin)">self</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">-&gt;</span> <span style="color: var(--DecType)">f64</span> <span style="color: var(--Bracket)">{</span>
        <span style="color: var(--Keyword)">match</span> <span style="color: var(--Builtin)">self</span> <span style="color: var(--Bracket)">{</span>
            <span style="color: var(--DecType)">Self</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--DecType)">Circle</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Parameter)">c</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">=&gt;</span> <span style="color: var(--Parameter)">c</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">area</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--DecType)">Self</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--DecType)">Square</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Parameter)">s</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">=&gt;</span> <span style="color: var(--Parameter)">s</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">area</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--DecType)">Self</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--DecType)">Triangle</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Parameter)">t</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">=&gt;</span> <span style="color: var(--Parameter)">t</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">area</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">,</span>
        <span style="color: var(--Bracket)">}</span>
    <span style="color: var(--Bracket)">}</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">trait</span> <span style="color: var(--DecType)">SimpleShape</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">area</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Operator)">&amp;</span><span style="color: var(--Builtin)">self</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">-&gt;</span> <span style="color: var(--DecType)">f64</span><span style="color: var(--Delimiter)">;</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">impl</span> <span style="color: var(--DecType)">SimpleShape</span> <span style="color: var(--Keyword)">for</span> <span style="color: var(--DecType)">Circle</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">area</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Operator)">&amp;</span><span style="color: var(--Builtin)">self</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">-&gt;</span> <span style="color: var(--DecType)">f64</span> <span style="color: var(--Bracket)">{</span>
        <span style="color: var(--Constant)">PI</span> <span style="color: var(--Operator)">*</span> <span style="color: var(--Builtin)">self</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Member)">radius</span> <span style="color: var(--Operator)">*</span> <span style="color: var(--Builtin)">self</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Member)">radius</span>
    <span style="color: var(--Bracket)">}</span>
<span style="color: var(--Bracket)">}</span>
<span style="color: var(--Keyword)">impl</span> <span style="color: var(--DecType)">Circle</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Modifier)">pub</span> <span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">new</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Parameter)">radius</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">f64</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">-&gt;</span> <span style="color: var(--DecType)">Self</span> <span style="color: var(--Bracket)">{</span>
        <span style="color: var(--DecType)">Circle</span> <span style="color: var(--Bracket)">{</span><span style="color: var(--Member)">radius</span><span style="color: var(--Bracket)">}</span>
    <span style="color: var(--Bracket)">}</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">const</span> <span style="color: var(--Constant)">DEFAULT_NAME</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--Operator)">&amp;</span><span style="color: var(--DecType)">str</span> <span style="color: var(--Operator)">=</span> <span style="color: var(--Strings)">"Felix"</span><span style="color: var(--Delimiter)">;</span>

<span style="color: var(--DocString)">///General processes necessary for startup.</span>
<span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">formalities</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">args</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">Vec</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--DecType)">String</span><span style="color: var(--Bracket)">&gt;</span> <span style="color: var(--Operator)">=</span>
        <span style="color: var(--Namespace)">env</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--Function)">args</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
            <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">collect</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
    <span style="color: var(--Comments)">// This is pretty intimidating looking, but this basically just translates to...</span>
    <span style="color: var(--Comments)">// "A List of functions that accept a singl Vector (Vec) of Strings as an argument"</span>
    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">steps_in_formalities</span><span style="color: var(--Delimiter)">:</span>
        <span style="color: var(--Bracket)">[</span>
            <span style="color: var(--Logical)">for</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--Decorator)">'a</span><span style="color: var(--Bracket)">&gt;</span>
            <span style="color: var(--Keyword)">fn</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Operator)">&amp;</span><span style="color: var(--Decorator)">'a</span>
            <span style="color: var(--Namespace)">std</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--Namespace)">vec</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--DecType)">Vec</span>
            <span style="color: var(--Bracket)">&lt;</span><span style="color: var(--Namespace)">std</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--Namespace)">string</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--DecType)">String</span><span style="color: var(--Bracket)">&gt;</span>
            <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
            <span style="color: var(--Integers)">4</span>
        <span style="color: var(--Bracket)">]</span>
        <span style="color: var(--Operator)">=</span>
    <span style="color: var(--Bracket)">[</span>
        <span style="color: var(--Function)">hello</span><span style="color: var(--Delimiter)">,</span>
        <span style="color: var(--Function)">greet</span><span style="color: var(--Delimiter)">,</span>
        <span style="color: var(--Function)">is_url</span><span style="color: var(--Delimiter)">,</span>
        <span style="color: var(--Function)">count</span>
    <span style="color: var(--Bracket)">]</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">stepnames</span> <span style="color: var(--Operator)">=</span>
        <span style="color: var(--DecType)">HashMap</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--Function)">from</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">[</span>
            <span style="color: var(--Bracket)">(</span><span style="color: var(--Integers)">1</span><span style="color: var(--Delimiter)">,</span> <span style="color: var(--Strings)">"one"</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Bracket)">(</span><span style="color: var(--Integers)">2</span><span style="color: var(--Delimiter)">,</span> <span style="color: var(--Strings)">"two"</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Bracket)">(</span><span style="color: var(--Integers)">3</span><span style="color: var(--Delimiter)">,</span> <span style="color: var(--Strings)">"three"</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Bracket)">(</span><span style="color: var(--Integers)">4</span><span style="color: var(--Delimiter)">,</span> <span style="color: var(--Strings)">"four"</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Bracket)">]</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Keyword)">mut</span> <span style="color: var(--Default)">i</span> <span style="color: var(--Operator)">=</span> <span style="color: var(--Integers)">0</span><span style="color: var(--DecType)">usize</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Logical)">for</span> <span style="color: var(--Default)">step</span> <span style="color: var(--Keyword)">in</span> <span style="color: var(--Default)">steps_in_formalities</span> <span style="color: var(--Bracket)">{</span>
        <span style="color: var(--Default)">step</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Operator)">&amp;</span><span style="color: var(--Default)">args</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
        <span style="color: var(--Default)">i</span> <span style="color: var(--Operator)">+=</span> <span style="color: var(--Integers)">1</span><span style="color: var(--Delimiter)">;</span>
        <span style="color: var(--Function)">println</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Strings)">"just completed step {}!"</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Default)">stepnames</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">get</span>
                <span style="color: var(--Bracket)">(</span><span style="color: var(--Operator)">&amp;</span><span style="color: var(--Default)">i</span><span style="color: var(--Bracket)">)</span>
                <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">unwrap</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
    <span style="color: var(--Bracket)">}</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Comments)">// Code that's ran *before* the program is executed.</span>
<span style="color: var(--Comments)">// ...Is there an artist equivalent to this? Its like downloading a custom brush or smth lol</span>
<span style="color: var(--Macro)">macro_rules!</span> <span style="color: var(--Macro)">greet</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Bracket)">(</span><span style="color: var(--Parameter)">$name</span><span style="color: var(--Delimiter)">:</span><span style="color: var(--DecType)">expr</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">=&gt;</span> <span style="color: var(--Bracket)">{</span>
        <span style="color: var(--Function)">println</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Strings)">"Hello, {}!"</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Parameter)">$name</span>
        <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
    <span style="color: var(--Bracket)">}</span><span style="color: var(--Delimiter)">;</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">hello</span><span style="color: var(--Bracket)">(</span>
    <span style="color: var(--Parameter)">_args</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--Operator)">&amp;</span><span style="color: var(--DecType)">Vec</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--DecType)">String</span><span style="color: var(--Bracket)">&gt;</span>
<span style="color: var(--Bracket)">)</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">escaped_str</span> <span style="color: var(--Operator)">=</span>
        <span style="color: var(--Strings)">"Hello<span style="color: var(--Escapes)">\t</span> World"</span><span style="color: var(--Delimiter)">;</span>
    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">bang</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">char</span> <span style="color: var(--Operator)">=</span> <span style="color: var(--Character)">'!'</span><span style="color: var(--Delimiter)">;</span>
    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">newline</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">char</span> <span style="color: var(--Operator)">=</span> <span style="color: var(--Character)">'<span style="color: var(--Escapes)">\n</span>'</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Comments)">// Yeah the {bang} bit could just be replaced by a "!"</span>
    <span style="color: var(--Comments)">// But having text substitution with a single char demonstrates highlighting better</span>
    <span style="color: var(--Function)">print</span><span style="color: var(--Bracket)">(</span>
        <span style="color: var(--Strings)">"my standard pulse is: {escaped_str}{bang}{bang}{bang}{newline}"</span>
    <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">greet</span><span style="color: var(--Bracket)">(</span>
    <span style="color: var(--Parameter)">args</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--Operator)">&amp;</span><span style="color: var(--DecType)">Vec</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--DecType)">String</span><span style="color: var(--Bracket)">&gt;</span>
<span style="color: var(--Bracket)">)</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Macro)">greet!</span><span style="color: var(--Bracket)">(</span>
        <span style="color: var(--Function)">get_param</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Default)">args</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Strings)">"name"</span>
        <span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">unwrap_or</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Constant)">DEFAULT_NAME</span>
                <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">to_string</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Bracket)">)</span>
    <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">get_param</span><span style="color: var(--Bracket)">(</span>
    <span style="color: var(--Parameter)">args</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--Operator)">&amp;</span><span style="color: var(--DecType)">Vec</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--DecType)">String</span><span style="color: var(--Bracket)">&gt;</span><span style="color: var(--Delimiter)">,</span>
    <span style="color: var(--Parameter)">to_get</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--Operator)">&amp;</span><span style="color: var(--DecType)">str</span>
<span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">-&gt;</span>
<span style="color: var(--DecType)">Option</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--DecType)">String</span><span style="color: var(--Bracket)">&gt;</span>
<span style="color: var(--Bracket)">{</span>

  <span style="color: var(--Return)">return</span>
    <span style="color: var(--Default)">args</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">iter</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">position</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Operator)">|</span><span style="color: var(--Parameter)">s</span><span style="color: var(--Operator)">|</span>
                <span style="color: var(--Operator)">*</span><span style="color: var(--Parameter)">s</span>
                <span style="color: var(--Operator)">==</span>
                <span style="color: var(--Strings)">"-"</span>
                    <span style="color: var(--Operator)">+</span>
                    <span style="color: var(--Parameter)">to_get</span>
        <span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">and_then</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Operator)">|</span><span style="color: var(--Parameter)">pos</span><span style="color: var(--Operator)">|</span>
                <span style="color: var(--Default)">args</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">get</span><span style="color: var(--Bracket)">(</span>
                    <span style="color: var(--Parameter)">pos</span> <span style="color: var(--Operator)">+</span> <span style="color: var(--Integers)">1</span>
                <span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">map</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Operator)">|</span><span style="color: var(--Parameter)">name</span><span style="color: var(--Operator)">|</span>
                <span style="color: var(--Parameter)">name</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">to_string</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Bracket)">)</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">get_shape</span><span style="color: var(--Bracket)">(</span>
    <span style="color: var(--Parameter)">args</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--Operator)">&amp;</span><span style="color: var(--DecType)">Vec</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--DecType)">String</span><span style="color: var(--Bracket)">&gt;</span>
<span style="color: var(--Bracket)">)</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">theshape</span> <span style="color: var(--Operator)">=</span>
        <span style="color: var(--Function)">get_param</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Default)">args</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Strings)">"shape"</span>
        <span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">unwrap_or</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Strings)">""</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">to_string</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">regex</span> <span style="color: var(--Operator)">=</span>
        <span style="color: var(--DecType)">Regex</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--Function)">new</span>
        <span style="color: var(--Bracket)">(</span><span style="color: var(--Special)">"(circle|square|triangle)"</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">unwrap</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Logical)">if</span> <span style="color: var(--Keyword)">let</span>
        <span style="color: var(--DecType)">Some</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Default)">capture</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Operator)">=</span>
        <span style="color: var(--Default)">regex</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">captures</span>
            <span style="color: var(--Bracket)">(</span><span style="color: var(--Operator)">&amp;</span><span style="color: var(--Default)">theshape</span><span style="color: var(--Bracket)">)</span>
    <span style="color: var(--Bracket)">{</span>
        <span style="color: var(--Function)">println</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Strings)">"The shape is... {}"</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Default)">capture</span>
                <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">get</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Integers)">1</span><span style="color: var(--Bracket)">)</span>
                <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">unwrap</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
                <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">as_str</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
    <span style="color: var(--Bracket)">}</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">is_url</span><span style="color: var(--Bracket)">(</span>
    <span style="color: var(--Parameter)">args</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--Operator)">&amp;</span><span style="color: var(--DecType)">Vec</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--DecType)">String</span><span style="color: var(--Bracket)">&gt;</span>
<span style="color: var(--Bracket)">)</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">url</span> <span style="color: var(--Operator)">=</span>
        <span style="color: var(--Function)">get_param</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Default)">args</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Strings)">"url"</span>
        <span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">unwrap_or</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Strings)">""</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">to_string</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">re</span> <span style="color: var(--Operator)">=</span>
        <span style="color: var(--DecType)">Regex</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--Function)">new</span>
        <span style="color: var(--Bracket)">(</span><span style="color: var(--Special)">r"^\w+://[\w.-]+$"</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">unwrap</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Logical)">if</span>
        <span style="color: var(--Default)">re</span><span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">is_match</span>
        <span style="color: var(--Bracket)">(</span><span style="color: var(--Operator)">&amp;</span><span style="color: var(--Default)">url</span><span style="color: var(--Bracket)">)</span>
    <span style="color: var(--Bracket)">{</span>
        <span style="color: var(--Function)">println</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Strings)">"is a url!"</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
    <span style="color: var(--Bracket)">}</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">count</span><span style="color: var(--Bracket)">(</span>
    <span style="color: var(--Parameter)">args</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--Operator)">&amp;</span><span style="color: var(--DecType)">Vec</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--DecType)">String</span><span style="color: var(--Bracket)">&gt;</span>
<span style="color: var(--Bracket)">)</span> <span style="color: var(--Bracket)">{</span>
    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">num</span> <span style="color: var(--Operator)">=</span>
        <span style="color: var(--Function)">get_param</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Default)">args</span><span style="color: var(--Delimiter)">,</span>
            <span style="color: var(--Strings)">"num"</span>
        <span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">and_then</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Operator)">|</span><span style="color: var(--Parameter)">n</span><span style="color: var(--Operator)">|</span>
                <span style="color: var(--Parameter)">n</span>
                    <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">parse</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
                    <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">ok</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Bracket)">)</span>
        <span style="color: var(--Delimiter)">.</span><span style="color: var(--Function)">unwrap_or</span><span style="color: var(--Bracket)">(</span>
            <span style="color: var(--Operator)">-</span><span style="color: var(--Integers)">1</span><span style="color: var(--DecType)">isize</span>
        <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Logical)">if</span> <span style="color: var(--Default)">num</span> <span style="color: var(--Operator)">&lt;</span> <span style="color: var(--Integers)">0</span> <span style="color: var(--Bracket)">{</span>
        <span style="color: var(--Return)">return</span><span style="color: var(--Delimiter)">;</span>
    <span style="color: var(--Bracket)">}</span>

    <span style="color: var(--Function)">println</span><span style="color: var(--Bracket)">(</span>
        <span style="color: var(--Strings)">"Counting up to {num}:"</span>
    <span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Logical)">for</span> <span style="color: var(--Default)">i</span> <span style="color: var(--Keyword)">in</span>
        <span style="color: var(--Integers)">0</span><span style="color: var(--Operator)">..</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Default)">num</span><span style="color: var(--Bracket)">)</span>
    <span style="color: var(--Bracket)">{</span>
        <span style="color: var(--Function)">print</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Strings)">" {i}"</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
    <span style="color: var(--Bracket)">}</span>

    <span style="color: var(--Function)">println</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Strings)">"!\nJob done."</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>
<span style="color: var(--Bracket)">}</span>

<span style="color: var(--Keyword)">fn</span> <span style="color: var(--Function)">main</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span> <span style="color: var(--Operator)">-&gt;</span> <span style="color: var(--DecType)">Result</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--Bracket)">()</span><span style="color: var(--Delimiter)">,</span> <span style="color: var(--DecType)">Box</span><span style="color: var(--Bracket)">&lt;</span><span style="color: var(--Keyword)">dyn</span> <span style="color: var(--Namespace)">std</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--Namespace)">error</span><span style="color: var(--Delimiter)">::</span><span style="color: var(--DecType)">Error</span><span style="color: var(--Bracket)">&gt;</span><span style="color: var(--Bracket)">&gt;</span> <span style="color: var(--Bracket)">{</span>

    <span style="color: var(--Comments)">// unused variables</span>
    <span style="color: var(--Keyword)">let</span> <span style="color: var(--Default)">int_val</span><span style="color: var(--Delimiter)">:</span> <span style="color: var(--DecType)">i32</span> <span style="color: var(--Operator)">=</span> <span style="color: var(--Integers)">42</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Function)">formalities</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--Function)">println</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Strings)">"Diff:\n- old value: {}\n+ new value: {}"</span><span style="color: var(--Delimiter)">,</span> <span style="color: var(--Integers)">40</span><span style="color: var(--Delimiter)">,</span> <span style="color: var(--Default)">int_val</span><span style="color: var(--Bracket)">)</span><span style="color: var(--Delimiter)">;</span>

    <span style="color: var(--DecType)">Ok</span><span style="color: var(--Bracket)">(</span><span style="color: var(--Bracket)">()</span><span style="color: var(--Bracket)">)</span>
<span style="color: var(--Bracket)">}</span>
</code></pre>

</body>
</html>
